<!DOCTYPE html>
<html>

<head>
    <title>
        table
    </title>
    <meta charset="utf8">
    <script src='./jquery.min.js'></script>
    <style>
        td {
            width:200px;
        }
    </style>
</head>

<body>
    <table border="1px">
        <tr>
            <td>
                close the door
            </td>
            <td><button id='turnOff_btn'>close the door</button></td>
        </tr>
        <tr>
            <td>
                open the door
            </td>
            <td><button id='turnOn_btn'>open the door</button></td>
        </tr>
        <tr>
            <td>
                switch status
            </td>
            <td><button id='switch_btn'>switch status</button></td>
        </tr>
        <tr>
            <td>
                get status
            </td>
            <td><button id='getStatus_btn'>get status</button></td>
        </tr>
        <tr>
            <td>door status</td>
            <td>
                <h4 id='status'>status here</h4>
            </td>
        </tr>
    </table>
    <script>
        $(document).ready(function(){

        });
        var doorStatus = 0;
        var debugStatus = 0;
        var phpPage='ctrler.php/';
        var strOpen='door is open';
        var srtClosed='door is closed';

        $('#turnOff_btn').click(function () {
            $.get(phpPage+'turnOff', {}, function (data, status) {
                logd('turnOff','data>'+data+' '+'status>'+status);
                if (data == '0') {
                    displayString(srtClosed);
                }
            });
        });

        $('#turnOn_btn').click(function () {
            $.get(phpPage+'turnOn', {}, function (data, status) {
                logd('turnOn','data>'+data+' '+'status>'+status);
                if (data == '1') {
                    displayString(strOpen);
                }
            });
        })

        $('#getStatus_btn').click(function () {
            $.get(phpPage+'s', {}, function (data, status) {
                logd('getStatus','data>'+data+' '+'status>'+status);
                if (data == '1') {
                    displayString(strOpen);
                } else {
                    displayString(srtClosed);
                }
            });
        });

        $('#switch_btn').click(function(){
            $.get(phpPage+'switch', {}, function (data, status) {
                logd('switchStatus','data>'+data+' '+'status>'+status);
                if (data == '1') {
                    displayString(strOpen);
                } else {
                    displayString(srtClosed);
                }
            });
        });

        function displayString(str) {
            $('#status').text(str);
        }

        $.get(phpPage+'s', {}, function (data, status) {
            logd('initGetStatus','data>'+data+' '+'status>'+status);
            if (data == '1') {
                displayString(strOpen);
            } else {
                displayString(srtClosed);
            }
        });

        function logd(TAG,str){
            if(debugStatus==1){
                console.log(TAG+': '+str);
            }
        }


    </script>
</body>

</html>